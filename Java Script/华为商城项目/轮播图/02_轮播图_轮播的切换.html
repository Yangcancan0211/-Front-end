<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/reset.css">
    <style>
        .banner .images{
        position: relative;
        height: 550px;
        }
        .banner .images .item{
        position: absolute;
        left: 0;
        right: 0;
        width: 100%;
         overflow: hidden;
         opacity: 0;
         transition: opacity 1000ms ease;
        }
          .banner .images .item.active{
            opacity: 1;
        }
        .banner .images .item img{
           position: relative;
           transform: translate(-50%);
           left: 50%;
           width: 1920px;
           height: 550px;
        }
    </style>
</head>
<body>
    <div class="banner">
        <ul class="images">
        </ul>
        <div class="control">
            <button class="prev">上一个</button>
            <button class="next">下一个</button>
        </div>
        <div class="indicator"></div>
    </div>
    <script src="./Json/banner.js"></script>
    <script>
        var bannerServarURL = "http://res.vmallres.com/"
        //动态添加轮播图图片的数据
        var imagesEl = document.querySelector(".images")
        var activeItem = null
        for (var i = 0;i < banners.length ;i++){
            //获取数据
            var banner = banners[i]
            //创建li元素
            var itemEl = document.createElement("li")
            itemEl.classList.add("item")
            if (i === 0){
                itemEl.classList.add("active")
                activeItem = itemEl
            }
            imagesEl.append(itemEl)
            //创建img元素
            var imgEl = document.createElement("img")
            imgEl.src = `${bannerServarURL}${banner.imgUrl}`
            itemEl.append(imgEl)
        }
        //监听按钮的点击
        var controlEl = document.querySelector(".control")
        var nextBtnEl = document.querySelector(".next")
        var prevBtnEl = document.querySelector(".prev")
        var currentIndex = 0
        var prevIndex = 0
        prevBtnEl.onclick = function() {
            //找到上一个
            prevIndex = currentIndex
            currentIndex--
            if(currentIndex < 0){
                currentIndex = banners.length - 1
            }
            //切换图
            switchBannerItem()
        }
        nextBtnEl.onclick = function() {
          prevIndex = currentIndex
            currentIndex++
            if(currentIndex === banners.length){
                currentIndex = 0
            }
            //切换图
            switchBannerItem()
        }
        //封装函数
        function switchBannerItem() {
      var currentItemEl = imagesEl.children[currentIndex]
            var prevItemEl = imagesEl.children[prevIndex]
            currentItemEl.classList.add("active")
            prevItemEl.classList.remove("active")
        }
    </script>
</body>
</html>